<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Claude Code Web IDE</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <!-- ‰∏ªÂÆπÂô® -->
    <div class="ide-container">
        <!-- Â∑¶‰æßËæπÊ†è -->
        <aside class="sidebar">
            <!-- È°πÁõÆÂå∫Âüü -->
            <div class="sidebar-section">
                <div class="section-header">
                    <h3>üìÅ È°πÁõÆ</h3>
                    <button class="icon-btn" onclick="showCreateProjectDialog()" title="ÂàõÂª∫È°πÁõÆ">
                        <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <line x1="12" y1="5" x2="12" y2="19"></line>
                            <line x1="5" y1="12" x2="19" y2="12"></line>
                        </svg>
                    </button>
                </div>
                <div id="projectsList" class="projects-list">
                    <div class="loading">Âä†ËΩΩÈ°πÁõÆ‰∏≠...</div>
                </div>
            </div>

            <!-- ‰ºöËØùÂå∫Âüü -->
            <div class="sidebar-section" id="sessionsSection" style="display: none;">
                <div class="section-header">
                    <h3>üí¨ ‰ºöËØù</h3>
                    <button class="icon-btn" onclick="createNewSession()" title="Êñ∞Âª∫ÂØπËØù">
                        <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <line x1="12" y1="5" x2="12" y2="19"></line>
                            <line x1="5" y1="12" x2="19" y2="12"></line>
                        </svg>
                    </button>
                </div>
                <div id="sessionsList" class="sessions-list"></div>
            </div>

            <!-- Â∫ïÈÉ®ËÆæÁΩÆÊåâÈíÆ -->
            <div class="sidebar-footer">
                <button class="settings-btn" onclick="showSettingsDialog()">
                    <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <circle cx="12" cy="12" r="3"></circle>
                        <path d="M12 1v6m0 6v6m0-18l4 4m-4-4L8 5m4 14l4-4m-4 4l-4-4M1 12h6m6 0h6M1 12l4-4m-4 4l4 4m14-4l-4-4m4 4l-4 4"></path>
                    </svg>
                    ÁéØÂ¢ÉÂèòÈáèÈÖçÁΩÆ
                </button>
            </div>
        </aside>

        <!-- ‰∏ªÂÜÖÂÆπÂå∫ -->
        <main class="main-content">
            <!-- Ê¨¢ËøéÈ°µÈù¢ -->
            <div id="welcomePage" class="welcome-page">
                <div class="welcome-content">
                    <h1>ü¶ä Claude Code Web IDE</h1>
                    <p>ÈÄâÊã©ÊàñÂàõÂª∫‰∏Ä‰∏™È°πÁõÆÂºÄÂßã‰ΩøÁî®</p>
                </div>
            </div>

            <!-- ÂØπËØùÁïåÈù¢ -->
            <div id="chatPage" class="chat-page" style="display: none;">
                <!-- ÂØπËØùÂ§¥ÈÉ® -->
                <div class="chat-header">
                    <div class="chat-info">
                        <h2 id="chatTitle">Êñ∞ÂØπËØù</h2>
                        <p id="chatProject"></p>
                    </div>
                    <div class="header-actions">
                        <div class="claude-status" id="claudeStatus" onclick="handleStatusClick()" title="ÁÇπÂáªÈáçÊñ∞ËøûÊé•">
                            <span class="status-dot"></span>
                            <span class="status-text">Claude Êú™ËøûÊé•</span>
                        </div>
                        <button class="icon-btn" onclick="clearChat()" title="Ê∏ÖÁ©∫ÂØπËØù">
                            <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <polyline points="3 6 5 6 21 6"></polyline>
                                <path d="M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"></path>
                            </svg>
                        </button>
                    </div>
                </div>

                <!-- ‰ªªÂä°ÂàóË°® -->
                <div class="todo-panel" id="todoPanel" style="display: none;">
                    <div class="todo-header">
                        <span class="todo-title">üìã ‰ªªÂä°ÂàóË°®</span>
                        <button class="icon-btn" onclick="toggleTodoPanel()" title="Êî∂Ëµ∑">
                            <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <polyline points="18 15 12 9 6 15"></polyline>
                            </svg>
                        </button>
                    </div>
                    <div class="todo-list" id="todoList"></div>
                </div>

                <!-- Ê∂àÊÅØÂàóË°® -->
                <div class="messages-container" id="messagesContainer">
                    <div class="messages" id="messagesList"></div>
                </div>

                <!-- ËæìÂÖ•Âå∫Âüü -->
                <div class="input-area">
                    <div class="file-preview" id="filePreview" style="display: none;"></div>
                    <div class="input-wrapper">
                        <button class="attach-btn" onclick="triggerFileUpload()" title="‰∏ä‰º†Êñá‰ª∂">
                            <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <path d="M21.44 11.05l-9.19 9.19a6 6 0 0 1-8.49-8.49l9.19-9.19a4 4 0 0 1 5.66 5.66l-9.2 9.19a2 2 0 0 1-2.83-2.83l8.49-8.48"></path>
                            </svg>
                        </button>
                        <input type="file" id="fileInput" multiple style="display: none;" onchange="handleFileSelect(event)">
                        <textarea
                            id="messageInput"
                            placeholder="ËæìÂÖ•Ê∂àÊÅØ... (Enter ÂèëÈÄÅ, Shift+Enter Êç¢Ë°å)"
                            rows="1"
                            onkeydown="handleKeyDown(event)"
                        ></textarea>
                        <button class="send-btn" id="sendBtn" onclick="sendMessage()" title="ÂèëÈÄÅ">
                            <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <line x1="22" y1="2" x2="11" y2="13"></line>
                                <polygon points="22 2 15 22 11 13 2 9 22 2"></polygon>
                            </svg>
                        </button>
                        <button class="abort-btn" id="abortBtn" onclick="abortClaudeSession()" title="ÁªàÊ≠¢" style="display: none;">
                            <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <rect x="3" y="3" width="18" height="18" rx="2" ry="2"></rect>
                            </svg>
                        </button>
                    </div>
                </div>
            </div>
        </main>
    </div>

    <!-- ÂàõÂª∫È°πÁõÆÂØπËØùÊ°Ü -->
    <div id="createProjectDialog" class="modal" style="display: none;">
        <div class="modal-content">
            <div class="modal-header">
                <h3>ÂàõÂª∫Êñ∞È°πÁõÆ</h3>
                <button class="close-btn" onclick="closeCreateProjectDialog()">&times;</button>
            </div>
            <div class="modal-body">
                <label>È°πÁõÆË∑ØÂæÑ:</label>
                <input type="text" id="newProjectPath" placeholder="‰æãÂ¶Ç: /Users/xxx/my-project">
            </div>
            <div class="modal-footer">
                <button onclick="closeCreateProjectDialog()">ÂèñÊ∂à</button>
                <button class="primary" onclick="createProject()">ÂàõÂª∫</button>
            </div>
        </div>
    </div>

    <!-- ÁéØÂ¢ÉÂèòÈáèËÆæÁΩÆÂØπËØùÊ°Ü -->
    <div id="settingsDialog" class="modal" style="display: none;">
        <div class="modal-content large">
            <div class="modal-header">
                <h3>‚öôÔ∏è Claude ÁéØÂ¢ÉÂèòÈáèÈÖçÁΩÆ</h3>
                <button class="close-btn" onclick="closeSettingsDialog()">&times;</button>
            </div>
            <div class="modal-body">
                <div class="env-controls">
                    <input type="text" id="envKey" placeholder="ÂèòÈáèÂêç">
                    <input type="text" id="envValue" placeholder="ÂèòÈáèÂÄº">
                    <button onclick="addEnvVar()">Ê∑ªÂä†</button>
                </div>
                <div id="envList" class="env-list"></div>
            </div>
            <div class="modal-footer">
                <button onclick="closeSettingsDialog()">ÂÖ≥Èó≠</button>
            </div>
        </div>
    </div>

    <script src="app.js"></script>
</body>
</html>
